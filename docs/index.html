<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MÃ©diathÃ¨que conviviale</title>
  <script type="importmap">
        {
          "imports": {
            "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
          }
        }
    </script>
</head>

<body>
  <div id="app">
    <h1>ðŸ“š MÃ©diathÃ¨que conviviale ðŸ“š</h1>
    <ul>
      <li v-for="book in books" :key="book.Title">
        <strong>{{ book.Title }}</strong> - {{ book.Authors }} ({{ book.PublishedYear }}) - {{ book.Publisher }}
      </li>
    </ul>
  </div>

  <script type="module">
    import { createApp } from 'vue'

    createApp({
      data() {
        return {
          books: [] // Array to store books data
        }
      },
      mounted() {
        this.loadBooks()
      },
      methods: {
        async loadBooks() {
          try {
            const response = await fetch('./data/books.ndjson')
            const text = await response.text()

            // Parse NDJSON format
            const books = text.split('\n').filter(line => line.trim() !== '').map(line => JSON.parse(line))

            // Set books data
            this.books = books
          } catch (error) {
            console.error('Erreur lors du chargement des livres :', error)
          }
        }
      }
    }).mount('#app')
  </script>
</body>

</html>